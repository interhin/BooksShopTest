(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,n){e.exports=n(99)},63:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){},94:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),c=n.n(o),l=n(11),u=n(106),i=n(107),s=n(108),m=(n(63),n(103)),d=Object(l.b)(function(e){return{total:e.orderTotal,numItems:e.orderCount}})(function(e){var t=e.numItems,n=e.total;return r.a.createElement("header",{className:"shop-header row"},r.a.createElement(m.a,{to:"/"},r.a.createElement("div",{className:"logo text-dark"},"Books Shop")),r.a.createElement(m.a,{to:"/cart"},r.a.createElement("div",{className:"shopping-cart"},r.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," Books ($",n.toFixed(2),")")))}),E=n(13),f=n(17),b=n(21),p=n(18),O=n(22),h=(n(65),function(e){var t=e.book,n=e.onModalOpenned,a=t.title,o=t.price,c=t.image;return r.a.createElement("div",{className:"book-list-item"},r.a.createElement("div",{className:"book-cover"},r.a.createElement("img",{src:c,alt:"cover"})),r.a.createElement("div",{className:"book-details"},r.a.createElement("span",{className:"book-title"},a),r.a.createElement("div",{className:"book-price"},"$",o),r.a.createElement("button",{onClick:n,className:"btn btn-info add-to-cart"},"\u041a\u0443\u043f\u0438\u0442\u044c")))}),k=r.a.createContext(),v=k.Provider,C=k.Consumer,y=function(){return function(e){return function(t){return r.a.createElement(C,null,function(n){return r.a.createElement(e,Object.assign({},t,{bookstoreService:n}))})}}},_=function(e,t){return{type:"BOOK_ADDED_TO_CART",payload:{bookId:e,count:t}}},g=function(e,t){return function(){t({type:"FETCH_BOOKS_REQUEST"}),e.getBooks().then(function(e){return t({type:"FETCH_BOOKS_SUCCESS",payload:e})}).catch(function(e){return t({type:"FETCH_BOOKS_FAILURE",payload:e})})}},j=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},N=(n(67),function(){return r.a.createElement("div",{className:"spinner-wrapper"},r.a.createElement("div",{className:"spinner"}))}),B=(n(69),function(){return r.a.createElement("div",null,"Error!")}),D=(n(71),function(e){var t=e.books,n=e.modalOpenned;return r.a.createElement("ul",{className:"book-list"},t.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(h,{book:e,onModalOpenned:function(){return n(e.id)}}))}))}),T=function(e){function t(){return Object(E.a)(this,t),Object(b.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.loading,a=e.error,o=e.modalOpenned;return n?r.a.createElement(N,null):a?r.a.createElement(B,null):r.a.createElement(D,{books:t,modalOpenned:o})}}]),t}(a.Component),A=j(y(),Object(l.b)(function(e){return{books:e.books,loading:e.loading,error:e.error,isModal:e.isModal}},function(e,t){var n=t.bookstoreService;return{fetchBooks:g(n,e),onAddedToCart:function(t){return e(_(t))},modalOpenned:function(t){return e({type:"MODAL_OPENNED",payload:t})}}}))(T),M=(n(73),Object(l.b)(function(e){return{items:e.cartItems,total:e.orderTotal}},function(e){return{onIncrease:function(t){return e(_(t,1))},onDecrease:function(t){return e({type:"BOOK_REMOVED_FROM_CART",payload:t})},onDelete:function(t){return e({type:"ALL_BOOKS_REMOVED_FROM_CART",payload:t})}}})(function(e){var t=e.items,n=e.total,a=e.onIncrease,o=e.onDecrease,c=e.onDelete;return r.a.createElement("div",{className:"shopping-cart-table"},r.a.createElement("h2",null,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),r.a.createElement("th",null,"\u0426\u0435\u043d\u0430"),r.a.createElement("th",null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"))),r.a.createElement("tbody",null,t.map(function(e,t){var n=e.id,l=e.title,u=e.count,i=e.total;return r.a.createElement("tr",{key:n},r.a.createElement("td",null,t+1),r.a.createElement("td",null,l),r.a.createElement("td",null,u),r.a.createElement("td",null,"$",i.toFixed(2)),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return c(n)},className:"btn btn-outline-danger btn-sm float-right"},r.a.createElement("i",{className:"fa fa-trash-o"})),r.a.createElement("button",{onClick:function(){return a(n)},className:"btn btn-outline-success btn-sm float-right"},r.a.createElement("i",{className:"fa fa-plus-circle"})),r.a.createElement("button",{onClick:function(){return o(n)},className:"btn btn-outline-warning btn-sm float-right"},r.a.createElement("i",{className:"fa fa-minus-circle"}))))}))),r.a.createElement("div",{className:"total"},"\u0421\u0443\u043c\u043c\u0430: $",n.toFixed(2)))})),S=function(){return r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement(M,null))},R=M,F=function(){return r.a.createElement(R,null)},w=n(104),I=n(105),K=n(47),L=n.n(K),x=(n(75),function(e){function t(){return Object(E.a)(this,t),Object(b.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isModal,n=e.modalClosed,a=e.currentBook,o=e.currentCount,c=e.bookAddedToCart,l=e.bookCountChanged;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{show:t,onHide:n},r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,null,a.title)),r.a.createElement(w.a.Body,{className:"book-modal-body"},r.a.createElement("img",{src:a.image,alt:a.title}),r.a.createElement("p",null,a.subtitle),r.a.createElement("div",{className:"count-of-book"},r.a.createElement(L.a,{min:0,value:o,onChange:function(e){return l(e)}}),r.a.createElement("span",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043d\u0438\u0433"))),r.a.createElement(w.a.Footer,null,r.a.createElement(I.a,{variant:"primary",onClick:function(){return c(a.id,o)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),r.a.createElement(I.a,{variant:"secondary",onClick:n},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))))}}]),t}(a.Component)),H=Object(l.b)(function(e){return{isModal:e.isModal,currentBook:e.currentBook,currentCount:e.currentCount}},function(e){return{modalClosed:function(){return e({type:"MODAL_CLOSED"})},bookAddedToCart:function(t,n){e(_(t,n)),e({type:"MODAL_CLOSED"})},bookCountChanged:function(t){return e(function(e){return{type:"BOOK_COUNT_CHANGED",payload:e}}(t))}}})(x),U=(n(94),function(){return r.a.createElement("main",{role:"main",className:"container"},r.a.createElement(d,{numItems:5,total:210}),r.a.createElement(i.a,null,r.a.createElement(s.a,{path:"/",component:S,exact:!0}),r.a.createElement(s.a,{path:"/cart",component:F})),r.a.createElement(H,null))}),V=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(B,null):this.props.children}}]),t}(a.Component),$=n(34),P=n.n($),G=n(52),J=n(25),Q=n(15),q=n(23),z={books:[],loading:!0,error:null,cartItems:[],orderTotal:0,orderCount:0,isModal:!1,currentBook:{},currentCount:0},W=function(e,t,n){var a=e.books,r=e.cartItems,o=a.find(function(e){return e.id===t}),c=r.findIndex(function(e){return e.id===t}),l=function(e,t,n){return 0===t.count?[].concat(Object(q.a)(e.slice(0,n)),Object(q.a)(e.slice(n+1))):-1===n?[].concat(Object(q.a)(e),[t]):[].concat(Object(q.a)(e.slice(0,n)),[t],Object(q.a)(e.slice(n+1)))}(r,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.id,r=void 0===a?e.id:a,o=t.count,c=void 0===o?0:o,l=t.title,u=void 0===l?e.title:l,i=t.total;return{id:r,title:u,count:c+n,total:(void 0===i?0:i)+n*e.price}}(o,r[c],n),c),u=l.reduce(function(e,t){return e+t.total},0),i=l.reduce(function(e,t){return e+t.count},0);return Object(Q.a)({},e,{cartItems:l,orderTotal:u,orderCount:i})},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BOOKS_REQUEST":return Object(Q.a)({},e,{books:[],loading:!0,error:null});case"FETCH_BOOKS_SUCCESS":return Object(Q.a)({},e,{books:t.payload,loading:!1,error:null});case"FETCH_BOOKS_FAILURE":return Object(Q.a)({},e,{books:[],loading:!1,error:t.payload});case"BOOK_ADDED_TO_CART":return W(e,t.payload.bookId,t.payload.count);case"BOOK_REMOVED_FROM_CART":return W(e,t.payload,-1);case"ALL_BOOKS_REMOVED_FROM_CART":var n=e.cartItems.find(function(e){return e.id===t.payload});return W(e,t.payload,-n.count);case"MODAL_OPENNED":var a=e.books.find(function(e){return e.id===t.payload});return Object(Q.a)({},e,{isModal:!0,currentBook:a});case"MODAL_CLOSED":return Object(Q.a)({},e,{isModal:!1,currentBook:{},currentCount:0});case"BOOK_COUNT_CHANGED":return Object(Q.a)({},e,{currentCount:t.payload});default:return e}},Y=Object(J.b)(X),Z=new function e(){var t=this;Object(E.a)(this,e),this.getBooks=Object(G.a)(P.a.mark(function e(){var n,a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://5d22b7fd4e05c600146ef4dd.mockapi.io/cupcake/books");case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.books.map(t.mapResToBook));case 7:case"end":return e.stop()}},e)})),this.mapResToBook=function(e){return{id:e.isbn13,title:e.title,image:e.image,price:e.price,subtitle:e.subtitle,url:e.url}}};c.a.render(r.a.createElement(l.a,{store:Y},r.a.createElement(V,null,r.a.createElement(v,{value:Z},r.a.createElement(u.a,null,r.a.createElement(U,null))))),document.getElementById("root"))}},[[53,2,1]]]);
//# sourceMappingURL=main.1d4c8d7b.chunk.js.map